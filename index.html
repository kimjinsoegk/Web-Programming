<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="학교생활을 효율적으로 관리하는 스마트 도우미">
    <title>School Life Helper - 학교생활 관리 도우미</title>
    <link rel="stylesheet" href="css/styles.css">
    <script type="module" src="js/app.js"></script>
    <!-- Remix Icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ==========================================
         헤더 영역 (Header Section)
         ========================================== 
         구조: 로고 + 네비게이션 + 우측 아이콘 버튼들
         높이: 64px (h-16)
         배경: white, 하단 테두리, 미세한 그림자
         ========================================== -->
    <header class="site-header">
        <!-- 좌측: 로고 -->
        <h1 id="logo-home" style="cursor: pointer;" title="대시보드로 이동">
            <i class="ri-book-line"></i> School Life Helper
        </h1>
        
        <!-- 중앙: 네비게이션 -->
        <nav class="header-nav" role="navigation" aria-label="메인 네비게이션">
            <!-- 시간표 버튼 -->
            <button data-section="schedule" class="nav-btn" aria-label="시간표 페이지">
                <i class="ri-calendar-line"></i>
                <span>시간표</span>
            </button>
            
            <!-- 과제 버튼 -->
            <button data-section="assignments" class="nav-btn" aria-label="과제 페이지">
                <i class="ri-task-line"></i>
                <span>과제</span>
            </button>
            
            <!-- 노트 버튼 -->
            <button data-section="notes" class="nav-btn" aria-label="필기노트 페이지">
                <i class="ri-book-2-line"></i>
                <span>노트</span>
            </button>
        </nav>
        
        <!-- 우측: 액션 버튼 그룹 (간격: 16px / space-x-4) -->
        <div class="header-actions">
            <!-- 알림 아이콘 (크기: 20px / text-xl, 색상: #9CA3AF → #4B5563) -->
            <button class="icon-btn" aria-label="알림" title="알림">
                <i class="ri-notification-line"></i>
            </button>
            
            <!-- 사용자 프로필 아이콘 (크기: 20px / text-xl, 색상: #9CA3AF → #4B5563) -->
            <button id="btn-profile" class="icon-btn" aria-label="설정" title="설정">
                <i class="ri-settings-3-line"></i>
            </button>
        </div>
    </header>

    <main class="container">
        <!-- ==========================================
             대시보드 섹션 (Dashboard Section)
             ========================================== -->
        <section id="dashboard" class="section">
            
            <!-- ==========================================
                 히어로 섹션 (Hero Section)
                 ========================================== 
                 중앙 정렬된 큰 제목과 설명, 버튼들
                 ========================================== -->
            <div class="hero-section hero-bg">
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <h1 class="hero-title">학교 생활을 더 스마트하게</h1>
                    <p class="hero-description">
                        시간표 관리부터 과제 추적까지, 학생들의 학교 생활을 체계적으로 도와주는 올인원 플랫폼입니다.
                    </p>
                    <div class="hero-buttons">
                        <button id="btn-get-started" class="btn-hero-primary">
                            <i class="ri-play-circle-line"></i>
                            시작하기
                        </button>
                        <button id="btn-learn-more" class="btn-hero-secondary">
                            <i class="ri-information-line"></i>
                            더 알아보기
                        </button>
                    </div>
                </div>
                <div class="hero-visual" aria-hidden="true">
                    <div class="blob"></div>
                    <div class="blob blob-2"></div>
                </div>
            </div>

            <!-- 기능 카드: 상단에 바로 노출 -->
            <div class="feature-cards">
                <div class="feature-card feature-card-blue" data-target="schedule" role="button" tabindex="0" aria-label="시간표 관리로 이동">
                    <div class="feature-icon"><i class="ri-calendar-line"></i></div>
                    <h3>시간표 관리</h3>
                    <p>매일 시간표를 한눈에 관리할 수 있습니다</p>
                </div>
                <div class="feature-card feature-card-green" data-target="assignments" role="button" tabindex="0" aria-label="과제 추적으로 이동">
                    <div class="feature-icon"><i class="ri-task-line"></i></div>
                    <h3>과제 추적</h3>
                    <p>과제 마감일을 놓치지 않고 관리할 수 있습니다</p>
                </div>
                <div class="feature-card feature-card-purple" data-target="notes" role="button" tabindex="0" aria-label="필기 노트로 이동">
                    <div class="feature-icon"><i class="ri-book-2-line"></i></div>
                    <h3>필기 노트</h3>
                    <p>수업 내용을 체계적으로 기록할 수 있습니다</p>
                </div>
                <div class="feature-card feature-card-orange" data-target="club" role="button" tabindex="0" aria-label="클럽 활동 (준비 중)">
                    <div class="feature-icon"><i class="ri-group-line"></i></div>
                    <h3>클럽 활동</h3>
                    <p>동아리의 활동 및 일정을 관리할 수 있습니다</p>
                </div>
            </div>

            <!-- ==========================================
                 이번 주 시간표 (요약)
                 ========================================== -->
            <div class="dashboard-timetable" style="margin-top: 40px;">
                <div class="dashboard-timetable-header">
                    <h3>
                        <i class="ri-calendar-line"></i>
                        오늘의 수업 요약
                    </h3>
                </div>
                <!-- 홈에서 시간표 요약을 보여주는 영역 -->
                <div id="main-timetable-grid" class="dashboard-timetable-grid" role="region" aria-label="오늘의 수업 요약">
                    <div class="loading"></div>
                </div>
            </div>
            
            
            
            <!-- ==========================================
                 통계 섹션 - 이번 주 학습 현황
                 ========================================== -->
            <div class="dashboard-card" style="margin-top: 20px;">
                <h3><i class="ri-book-2-line"></i> 최근 노트</h3>
                <div id="dashboard-recent-notes"></div>
            </div>

            <div class="stats-section" style="margin-top: 20px;">
                <h3 class="stats-title">이번 주 학습 현황</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number stat-blue" id="stat-completed-assignments">0</div>
                        <div class="stat-label">완료한 과제</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number stat-green" id="stat-remaining-assignments">0</div>
                        <div class="stat-label">남은 과제</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number stat-orange" id="stat-next-eta">-</div>
                        <div class="stat-label">과제 남은 시간</div>
                    </div>
                </div>
            </div>

            <!-- 기존 대시보드 카드 (숨김 처리 또는 제거 가능) -->
            <div class="dashboard-grid" style="display: none;">
                <div class="dashboard-card">
                    <h3><i class="ri-calendar-check-line"></i> 오늘의 시간표</h3>
                    <div id="dashboard-schedule" role="region" aria-label="오늘의 시간표">
                        <div class="loading"></div>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="ri-file-list-line"></i> 다가오는 과제</h3>
                    <div id="dashboard-assignments" role="region" aria-label="다가오는 과제 목록">
                        <div class="loading"></div>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="ri-time-line"></i> 오늘 공부 시간</h3>
                    <div id="dashboard-study" role="timer" aria-label="오늘 공부한 시간">00:00:00</div>
                </div>
            </div>
        </section>

        <section id="schedule" class="section hidden">
            <h2>시간표</h2>
            
            <!-- 시간표 세트 관리 -->
            <div id="schedule-manager" class="schedule-manager">
                <!-- JavaScript로 렌더링됨 -->
            </div>
            
            <!-- 시간표 상단 도구 모음 -->
            <div class="schedule-toolbar">
                <div class="schedule-guide">
                    <div class="guide-icon">
                        <i class="ri-drag-move-2-line"></i>
                    </div>
                    <div class="guide-text">
                        <strong>드래그하여 추가하기</strong>
                        <p>시간표의 빈 칸을 드래그하여 수업을 쉽고 빠르게 등록하세요.</p>
                    </div>
                </div>
                <div class="schedule-actions">
                    <button type="button" id="view-toggle-btn" class="btn-secondary">
                        <i class="ri-list-check"></i> 리스트로 보기
                    </button>
                    <button type="button" id="clear-schedules" class="btn-danger-text">
                        <i class="ri-delete-bin-line"></i> 전체 초기화
                    </button>
                </div>
            </div>

            <!-- 새: 주간 시간표 (CSS Grid 기반) -->
            <div class="table-wrap">
                <div id="schedule-grid" class="schedule-grid">
                    <!-- grid content rendered by JS -->
                </div>
                <div id="schedule-list-view" class="schedule-list-view hidden">
                    <!-- list content rendered by JS -->
                </div>
            </div>

            <!-- 시간표 관리 패널 -->
            <div class="schedule-management">
                <h3>등록된 시간표</h3>
                <div id="schedule-cards" class="schedule-cards">
                    <!-- 시간표 카드들이 여기에 표시됩니다 -->
                </div>
            </div>
            
            <!-- 시간표 추가/수정 공용 모달 -->
            <div id="schedule-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modal-title">수업 정보</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <form id="schedule-modal-form" class="modal-form">
                        <input type="hidden" id="modal-mode" value="create"> <!-- create or edit -->
                        <input type="hidden" id="modal-schedule-id">
                        
                        <input type="text" id="modal-class-name" placeholder="수업명" required>
                        <input type="text" id="modal-location" placeholder="장소 (선택)">
                        
                        <!-- 요일 선택 (추가 모드일 때만 수정 가능하도록 할 수도 있음) -->
                        <div class="modal-row" style="margin-bottom: 12px;">
                            <label style="font-weight:600; font-size:14px; margin-right:8px;">요일:</label>
                            <select id="modal-day" style="padding:6px; border-radius:4px; border:1px solid #ddd;">
                                <option value="월">월요일</option>
                                <option value="화">화요일</option>
                                <option value="수">수요일</option>
                                <option value="목">목요일</option>
                                <option value="금">금요일</option>
                                <option value="토">토요일</option>
                                <option value="일">일요일</option>
                            </select>
                        </div>

                        <div class="edit-time-row">
                            <label>시작:</label>
                            <select id="modal-start-hour"></select>:
                            <select id="modal-start-min"></select>
                            
                            <label>종료:</label>
                            <select id="modal-end-hour"></select>:
                            <select id="modal-end-min"></select>
                        </div>
                        
                        <label class="color-label">블록 색상: <input type="color" id="modal-class-color"></label>
                        
                        <div class="modal-buttons">
                            <button type="submit" class="btn-primary">저장</button>
                            <button type="button" class="btn-cancel">취소</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="assignments" class="section hidden">
            <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2><i class="ri-task-line"></i> 과제 관리</h2>
            </div>

            <div class="assignments-layout">
                <!-- Left Column: Calendar -->
                <div class="assignments-main">
                    <div class="card h-full">
                        <div class="card-header">
                            <h3><i class="ri-calendar-event-line"></i> 월간 일정</h3>
                        </div>
                        <div id="assignments-calendar" class="assignments-calendar">로딩 중...</div>
                    </div>
                </div>
                
                <!-- Right Column: List -->
                <div class="assignments-side">
                    <div class="card h-full">
                        <div class="card-header">
                            <h3><i class="ri-list-check-2"></i> 할 일 목록</h3>
                            <button id="btn-add-assignment" class="btn-primary" style="padding: 6px 12px; font-size: 13px;">
                                <i class="ri-add-line"></i> 추가
                            </button>
                        </div>
                        <div id="assignments-list" class="list custom-scrollbar">로딩 중...</div>
                    </div>
                </div>
            </div>
            
            <!-- 과제 추가/수정 모달 -->
            <div id="assignment-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="assignment-modal-title">과제 정보</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <form id="assignment-modal-form" class="modal-form">
                        <input type="hidden" id="assignment-modal-mode" value="create">
                        <input type="hidden" id="assignment-modal-id">
                        
                        <input type="text" id="assignment-modal-title" placeholder="과제 제목" required>
                        
                        <div class="modal-row" style="margin-bottom: 12px;">
                            <label style="font-weight:600; font-size:14px; margin-right:8px;">수업:</label>
                            <select id="assignment-modal-class" class="assignment-modal-select">
                                <option value="">수업 선택 (선택사항)</option>
                            </select>
                        </div>

                        <div class="modal-row" style="margin-bottom: 12px; display:flex; gap:12px;">
                            <label style="flex:1;">
                                <span style="display:block; font-weight:600; font-size:14px; margin-bottom:4px;">시작일</span>
                                <input type="date" id="assignment-modal-start" class="assignment-modal-date" required>
                            </label>
                            <label style="flex:1;">
                                <span style="display:block; font-weight:600; font-size:14px; margin-bottom:4px;">마감일</span>
                                <input type="date" id="assignment-modal-end" class="assignment-modal-date" required>
                            </label>
                        </div>
                        
                        <label class="color-label">색상: <input type="color" id="assignment-modal-color" value="#ff8a65"></label>
                        
                        <textarea id="assignment-modal-notes" placeholder="세부 내용" class="assignment-modal-textarea"></textarea>
                        
                        <div class="modal-buttons">
                            <button type="submit" class="btn-primary">저장</button>
                            <button type="button" class="btn-cancel">취소</button>
                        </div>
                    </form>
                </div>
            </div>


        </section>

        <section id="notes" class="section hidden">
            <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2><i class="ri-book-2-line"></i> 필기 노트</h2>
                <div class="header-controls" style="display: flex; gap: 12px;">
                    <div class="search-box">
                        <i class="ri-search-line"></i>
                        <input type="text" id="note-search" placeholder="노트 검색...">
                    </div>
                    <button id="btn-add-note" class="btn-primary" onclick="App.openNoteModal('create')">
                        <i class="ri-add-line"></i> 새 노트 작성
                    </button>
                </div>
            </div>

            <!-- 노트 필터/태그 영역 (추후 확장 가능) -->
            <div class="notes-filter-bar" id="notes-filter-bar" style="margin-bottom: 20px; display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px;">
                <button class="filter-chip active" data-filter="all">전체</button>
                <!-- JS로 수업별 필터 생성 -->
            </div>

            <div id="notes-grid" class="notes-grid">
                <!-- JS로 렌더링 -->
                <div class="loading">로딩 중...</div>
            </div>
        </section>

        <!-- 클럽 활동 섹션 (준비 중) -->
        <section id="club" class="section hidden">
            <div class="empty-state" style="padding: 100px 0;">
                <div class="empty-state-icon" style="font-size: 64px; color: var(--primary-light); margin-bottom: 24px;">
                    <i class="ri-group-line"></i>
                </div>
                <h2>클럽 활동 기능은 준비 중입니다</h2>
                <p style="color: var(--text-secondary); margin-bottom: 32px;">동아리 일정과 공지사항을 관리하는 기능이 곧 업데이트될 예정입니다.</p>
                <button class="btn-secondary" onclick="document.getElementById('logo-home').click()">
                    홈으로 돌아가기
                </button>
            </div>
        </section>

            <!-- 노트 추가/수정 모달 -->
            <div id="note-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="note-modal-title">노트 작성</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <form id="note-modal-form" class="modal-form">
                        <input type="hidden" id="note-modal-mode" value="create">
                        <input type="hidden" id="note-modal-id">
                        
                        <div class="modal-row" style="margin-bottom: 12px;">
                            <select id="note-modal-class" class="note-modal-select">
                                <option value="">수업 선택</option>
                            </select>
                        </div>

                        <input type="text" id="note-input-title" placeholder="노트 제목" class="note-modal-title-input" required>
                        
                        <textarea id="note-modal-content" placeholder="내용을 입력하세요..." class="note-modal-textarea" required></textarea>
                        
                        <div class="modal-buttons">
                            <button type="submit" class="btn-primary">저장</button>
                            <button type="button" class="btn-cancel">취소</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- 설정 모달 -->
            <div id="settings-modal" class="modal" style="display: none;">
                <div class="modal-content settings-modal-content">
                    <div class="modal-header">
                        <h3><i class="ri-settings-3-line"></i> 설정</h3>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body settings-modal-body">
                        <div class="settings-section">
                            <h4 class="settings-section-title">데이터 관리</h4>
                            <div class="settings-buttons">
                                <button id="btn-backup-export" class="btn-secondary settings-btn-full">
                                    <i class="ri-download-line"></i> 데이터 백업 (다운로드)
                                </button>
                                <button id="btn-backup-import-trigger" class="btn-secondary settings-btn-full">
                                    <i class="ri-upload-line"></i> 데이터 복구 (불러오기)
                                </button>
                                <input type="file" id="backup-file-input" accept=".json" style="display: none;">
                            </div>
                            <p class="settings-description">
                                * 현재 저장된 모든 시간표, 과제, 노트 데이터를 파일로 저장하거나 복원합니다.
                            </p>
                        </div>
                        
                        <div class="settings-divider">
                            <h4 class="settings-section-title">초기화</h4>
                            <button id="btn-reset-all" class="btn-danger-text settings-btn-danger">
                                <i class="ri-delete-bin-line"></i> 모든 데이터 삭제
                            </button>
                        </div>
                    </div>
                </div>
            </div>
    </main>

    <!-- ==========================================
         푸터 (Footer Section)
         ========================================== 
         다크 배경, 4개 컬럼 레이아웃
         ========================================== -->
    <footer class="site-footer">
        <div class="footer-container">
            <!-- 로고 및 설명 -->
            <div class="footer-column">
                <h3 class="footer-logo">School Life Helper</h3>
                <p class="footer-description">
                    학생들의 효율적인 학교 생활을 위한<br>
                    스마트 도우미
                </p>
            </div>
            
            <!-- 기능 -->
            <div class="footer-column">
                <h4 class="footer-title">기능</h4>
                <ul class="footer-links">
                    <li><a href="#" class="footer-nav-link" data-target="schedule">시간표 관리</a></li>
                    <li><a href="#" class="footer-nav-link" data-target="assignments">과제 추적</a></li>
                    <li><a href="#" class="footer-nav-link" data-target="notes">필기 노트</a></li>
                    <li><a href="#" class="footer-nav-link" data-target="club">클럽 활동</a></li>
                </ul>
            </div>
            
            <!-- 지원 -->
            <div class="footer-column">
                <h4 class="footer-title">지원</h4>
                <ul class="footer-links">
                    <li><a href="#" id="footer-tutorial-link">튜토리얼</a></li>
                </ul>
            </div>
            
            <!-- 연락처 -->
            <div class="footer-column">
                <h4 class="footer-title">연락처</h4>
                <ul class="footer-contact">
                    <li>
                        <i class="ri-mail-line"></i>
                        이메일: Kimjinseok061010@gmail.com
                    </li>
                    <li>
                        <i class="ri-map-pin-line"></i>
                        주소: 경기 군포시 한세로 30 한세대학교
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- 푸터 하단 -->
        <div class="footer-bottom">
            <div class="footer-bottom-inner">
                <p class="footer-copy">© 2024 School Life Helper. All rights reserved.</p>

                <div class="footer-actions">
                    <button class="chat-button" aria-label="Talk with us">
                        <i class="ri-chat-3-line"></i>
                        <span class="chat-text">Talk with Us</span>
                    </button>
                </div>
            </div>
        </div>
    </footer>

</body>
</html>